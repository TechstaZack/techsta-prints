<html>
    <head>
        <title>
            Techsta Prints
        </title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div class="alert alert-primary alert-dismissible fade show" role="alert">
            <center>
            <strong>Store Opening Sale!</strong> Get 50% off when purchasing 3D prints online if you use the code <strong>OPENSTORE50</strong>! Only available until September 31st.
          </center>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <a class="navbar-brand" href="shop.html">Techsta Prints</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                      <a class="nav-link" href="fidgets.html">Fidgets <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="suggest.html">Suggest <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="custommodels.html"><b>Custom Models</b> <span class="sr-only">(current)</span></a>
                      </li>
                  </ul>
                  <button class="btn btn-outline-danger" style="margin-right: 20px;" onclick="logout()" id="emailchecker" style="color:grey"></button>
                  <a id='cart' class="btn btn-outline-secondary my-2 my-sm-0" type="submit" href="cart.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                  </svg></a>
                </div>
              </nav>
          
        <div class="container">
            <center>
                <h1 id="ht">Techsta Prints</h1>
            <h3>Custom Prints</h3>
            <hr>
            <p>Techsta prints supports custom 3d models to be printed for you. Once you have submitted your prints, we will email you about the extra details. (e.g. Colours, Size, Pricing etc)<br>Submit any url that has a .stl or .3mf file (e.g. printables, thiniverse or google drive)<br>If you want multiple prints, submit them all seperatly, but we will still fulfill it as one order.</p>
            <hr>
            <div class="input-group">
                <input type="link" class="form-control" placeholder="https://3dprintwebsite.com/modelpage" aria-label="Recipient's username" aria-describedby="basic-addon2" id="link">
            </div>          
            <br>
            <button class="btn btn-outline-secondary" style="width:100%;" onclick="SubmitURL()">Submit</button>
            <div id="yep">
                <h5 style="color:green !important;"></h5>
            </div>
        <center>
        </div>
        <script src="index.js"></script>
        <script>
            const epicvar = localStorage.getItem("email")
            if(epicvar == null || epicvar == ''){
                window.location.href='index.html'
            }else{
                document.getElementById('emailchecker').innerHTML = epicvar
            }
            function SubmitURL(){
                document.getElementById('yep').innerHTML = '<h5 style="color:red !important;"></h5>'
                const url = document.getElementById('link').value;
                const email = window.localStorage.getItem('email');
                if(url == null || url == '') return;
                document.getElementById('yep').innerHTML = `<h5 style="color:grey !important;">Loading</h5>`
                fetch(`https://kilvington-prints-api-ahf6ft7xlq-uc.a.run.app/custom?email=${email}&url=${url}`)
    .then(response => {
      if (response.ok) {
        document.getElementById('yep').innerHTML = `<h5 style="color:green !important;">Successfully submitted! Thanks :)</h5>`
      }else{
         document.getElementById('yep').innerHTML = `<h5 style="color:red !important;">We encountered an error. Please try again later.</h5>`
      }
    })

            }
            const cart= localStorage.getItem('cart-amount')
            if(cart != null){
            document.getElementById('cart').innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
              </svg> ${cart}`
            }


              
        
        
        </script>
    </body>
</html>
